filter {
  if [type] == "nginx-access" {
    grok {
      patterns_dir => "./etc/logstash/patterns.d"
      match => [ "message", "%{NGINXACCESS}" ]
      add_field => [ "received_at", "%{@timestamp}" ]
    }
    date {
      match => [ "timestamp", "dd/MMM/yyyy:HH:mm:ss Z" ]
    }
  }
}
